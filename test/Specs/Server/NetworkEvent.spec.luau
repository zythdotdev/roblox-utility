return function()
	local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Connection = require(ReplicatedStorage.Modules.Connection)
	local NetworkEvent = Connection.NetworkEvent

    describe("NetworkEventServer", function()
		it("Should create a new network event", function()
			local event = NetworkEvent.new("TestEvent1", ReplicatedStorage)
			expect(event).to.be.ok()
			expect(event.className).to.equal("NetworkEvent")
		end)
		it("Should connect and fire the event", function()
			local event = NetworkEvent.new("TestEvent2", ReplicatedStorage)
			task.delay(0.5, function()
				event:FireAllClients()
			end)
		end)
		it("Should pass arguments when fired", function()
			local event = NetworkEvent.new("TestEvent3", ReplicatedStorage)
			task.delay(0.5, function()
				event:FireAllClients(1, "test", true)
			end)
		end)
		it("Should disconnect properly", function()
			local event = NetworkEvent.new("TestEvent4", ReplicatedStorage)
			task.delay(0.5, function()
				event:FireAllClients()
			end)
		end)
		it("Should allow multiple connections", function()
			local event = NetworkEvent.new("TestEvent5", ReplicatedStorage)
			task.delay(0.5, function()
				event:FireAllClients()
			end)
		end)
	end)
end